<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/Q-apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/name.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/name.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic%7CPacifico:300,300italic,400,400italic,700,700italic%7CEB+Garamond:300,300italic,400,400italic,700,700italic%7CSource+Code+Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha256-wiz7ZSCn/btzhjKDQBms9Hx4sSeUYsDrTLg7roPstac=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"github.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"show_result":true,"style":"mac"},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="STARS   START      REMOVE       Remove                     保留 卸载   WEATHER       加载中...      切换天气    晴天   多云   下雨   下雪   雾霾      查询城市    海淀区   三门峡           .back-button {         position: fixed;">
<meta property="og:type" content="website">
<meta property="og:title" content="toys">
<meta property="og:url" content="https://github.com/qcy22/qcy22.github.io.git/toys/index.html">
<meta property="og:site_name" content="QCY&#39;s blog">
<meta property="og:description" content="STARS   START      REMOVE       Remove                     保留 卸载   WEATHER       加载中...      切换天气    晴天   多云   下雨   下雪   雾霾      查询城市    海淀区   三门峡           .back-button {         position: fixed;">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-10-17T15:57:04.000Z">
<meta property="article:modified_time" content="2025-04-24T03:00:57.155Z">
<meta property="article:author" content="QCY">
<meta property="article:tag" content="备考期中版">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://github.com/qcy22/qcy22.github.io.git/toys/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":false,"lang":"en","comments":true,"permalink":"https://github.com/qcy22/qcy22.github.io.git/toys/index.html","path":"toys/index.html","title":"toys"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>toys | QCY's blog
</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">QCY's blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">备考期中版</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-toys"><a href="/toys/" rel="section"><i class="fa fa-gamepad fa-fw"></i>toys</a></li><li class="menu-item menu-item-slidev"><a href="/slides-test/" rel="section"><i class="fa fa-external-link fa-fw"></i>slidev</a></li><li class="menu-item menu-item-shell"><a href="/shell/" rel="section"><i class="fa fa-terminal fa-fw"></i>shell</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#stars"><span class="nav-text">STARS</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#remove"><span class="nav-text">REMOVE</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link"><span class="nav-text">
Remove
</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#weather"><span class="nav-text">WEATHER</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="QCY"
      src="/images/myavatar.jpg">
  <p class="site-author-name" itemprop="name">QCY</p>
  <div class="site-description" itemprop="description">备考期中版</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">66</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/qcy22" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qcy22" rel="noopener me"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2807721487@qq.com" title="E-Mail → mailto:2807721487@qq.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
<div style="margin-top: 10px">
  <canvas id="canvas" style="width:58%;"></canvas>
</div>



<script>
(function(){
   var digit=
    [
        [
            [0,0,1,1,1,0,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,0,1,1,0],
            [0,0,1,1,1,0,0]
        ],//0
        [
            [0,0,0,1,1,0,0],
            [0,1,1,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [1,1,1,1,1,1,1]
        ],//1
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,1,1],
            [1,1,1,1,1,1,1]
        ],//2
        [
            [1,1,1,1,1,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//3
        [
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,0],
            [0,0,1,1,1,1,0],
            [0,1,1,0,1,1,0],
            [1,1,0,0,1,1,0],
            [1,1,1,1,1,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,1,1]
        ],//4
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,1,1,1,1,0],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//5
        [
            [0,0,0,0,1,1,0],
            [0,0,1,1,0,0,0],
            [0,1,1,0,0,0,0],
            [1,1,0,0,0,0,0],
            [1,1,0,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//6
        [
            [1,1,1,1,1,1,1],
            [1,1,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,0,0,1,1,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0],
            [0,0,1,1,0,0,0]
        ],//7
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,1,1,0]
        ],//8
        [
            [0,1,1,1,1,1,0],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [1,1,0,0,0,1,1],
            [0,1,1,1,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,0,1,1],
            [0,0,0,0,1,1,0],
            [0,0,0,1,1,0,0],
            [0,1,1,0,0,0,0]
        ],//9
        [
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,1,1,1,0,0],
            [0,0,0,0,0,0,0]
        ]//:
    ];

var canvas = document.getElementById('canvas');

if(canvas.getContext){
    var cxt = canvas.getContext('2d');
    //声明canvas的宽高
    var H = 100,W = 700;
    canvas.height = H;
    canvas.width = W;
    cxt.fillStyle = '#f00';
    cxt.fillRect(10,10,50,50);

    //存储时间数据
    var data = [];
    //存储运动的小球
    var balls = [];
    //设置粒子半径
    var R = canvas.height/20-1;
    (function(){
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        //存储时间数字，由十位小时、个位小时、冒号、十位分钟、个位分钟、冒号、十位秒钟、个位秒钟这7个数字组成
        data.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
    })();

    /*生成点阵数字*/
    function renderDigit(index,num){
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    cxt.beginPath();
                    cxt.arc(14*(R+2)*index + j*2*(R+1)+(R+1),i*2*(R+1)+(R+1),R,0,2*Math.PI);
                    cxt.closePath();
                    cxt.fill();
                }
            }
        }
    }

    /*更新时钟*/
    function updateDigitTime(){
        var changeNumArray = [];
        var temp = /(\d)(\d):(\d)(\d):(\d)(\d)/.exec(new Date());
        var NewData = [];
        NewData.push(temp[1],temp[2],10,temp[3],temp[4],10,temp[5],temp[6]);
        for(var i = data.length-1; i >=0 ; i--){
            //时间发生变化
            if(NewData[i] !== data[i]){
                //将变化的数字值和在data数组中的索引存储在changeNumArray数组中
                changeNumArray.push(i+'_'+(Number(data[i])+1)%10);
            }
        }
        //增加小球
        for(var i = 0; i< changeNumArray.length; i++){
            addBalls.apply(this,changeNumArray[i].split('_'));
        }
        data = NewData.concat();
    }

    /*更新小球状态*/
    function updateBalls(){
        for(var i = 0; i < balls.length; i++){
            balls[i].stepY += balls[i].disY;
            balls[i].x += balls[i].stepX;
            balls[i].y += balls[i].stepY;
            if(balls[i].x > W + R || balls[i].y > H + R){
                balls.splice(i,1);
                i--;
            }
        }
    }

    /*增加要运动的小球*/
    function addBalls(index,num){
        var numArray = [1,2,3];
        var colorArray =  ["#3BE","#09C","#A6C","#93C","#9C0","#690","#FB3","#F80","#F44","#C00"];
        for(var i = 0; i < digit[num].length; i++){
            for(var j = 0; j < digit[num][i].length; j++){
                if(digit[num][i][j] == 1){
                    var ball = {
                        x:14*(R+2)*index + j*2*(R+1)+(R+1),
                        y:i*2*(R+1)+(R+1),
                        stepX:Math.floor(Math.random() * 4 -2),
                        stepY:-2*numArray[Math.floor(Math.random()*numArray.length)],
                        color:colorArray[Math.floor(Math.random()*colorArray.length)],
                        disY:1
                    };
                    balls.push(ball);
                }
            }
        }
    }

    /*渲染*/
    function render(){
        //重置画布宽度，达到清空画布的效果
        canvas.height = 100;
        //渲染时钟
        for(var i = 0; i < data.length; i++){
            renderDigit(i,data[i]);
        }
        //渲染小球
        for(var i = 0; i < balls.length; i++){
            cxt.beginPath();
            cxt.arc(balls[i].x,balls[i].y,R,0,2*Math.PI);
            cxt.fillStyle = balls[i].color;
            cxt.closePath();
            cxt.fill();
        }
    }

    clearInterval(oTimer);
    var oTimer = setInterval(function(){
        //更新时钟
        updateDigitTime();
        //更新小球状态
        updateBalls();
        //渲染
        render();
    },50);
}

})();
</script>

<div class="site-overview-wrap sidebar-panel sidebar-panel-active">
<div class="site-overview">



</div>
</div>







        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner page posts-expand">


    
    
    
    <div class="post-block" lang="en"><header class="post-header">

<h1 class="post-title" itemprop="name headline">toys
</h1>

<div class="post-meta-container">
</div>

</header>

      
      
      <div class="post-body">
          <h1 id="stars">STARS</h1>
<div id="container">
<button id="startButton">
START
</button>
<div id="renderCanvas">

</div>
</div>
<h1 id="remove">REMOVE</h1>
<div class="Confirm">
<div class="Confirm-Header">
<a class="Confirm-Header-Button Confirm-Header-Button_Close" href="javascript: void(0)"></a>
<a class="Confirm-Header-Button Confirm-Header-Button_Minimize" href="javascript: void(0)"></a>
<a class="Confirm-Header-Button Confirm-Header-Button_Maximize" href="javascript: void(0)"></a>
<h2 class="Confirm-Header-Title">
Remove
</h2>
</div>
<div class="Confirm-Body">
<figure class="Boi" style="--happiness:0.9; --derp:1; --px:0.5; --py:0.5;">
<div class="Boi-Blush Boi-Blush_L">

</div>
<div class="Boi-Blush Boi-Blush_R">

</div>
<div class="Boi-Eye Boi-Eye_L">

</div>
<div class="Boi-Eye Boi-Eye_R">

</div>
<div class="Boi-Mouth">

</div>
</figure>
<p><a class="Confirm-Body-Button Confirm-Body-Button_Cancel" href="javascript: void(0)">保留</a>
<a class="Confirm-Body-Button Confirm-Body-Button_Delete" href="javascript: void(0)">卸载</a></p>
</div>
</div>
<h1 id="weather">WEATHER</h1>
<div class="main-container">
<div id="weatherCard" class="weather-card">
<div id="weatherAnimation" class="weather-animation">

</div>
<div class="loading">
加载中...
</div>
</div>
<div class="side-controls">
<div class="control-section">
<div class="control-label">
切换天气
</div>
<div class="weather-buttons">
<button class="btn btn-weather" data-weather="sunny">
晴天
</button>
<button class="btn btn-weather" data-weather="cloudy">
多云
</button>
<button class="btn btn-weather" data-weather="rainy">
下雨
</button>
<button class="btn btn-weather" data-weather="snowy">
下雪
</button>
<button class="btn btn-weather" data-weather="haze">
雾霾
</button>
</div>
</div>
<div class="control-section">
<div class="control-label">
查询城市
</div>
<div class="city-buttons">
<button class="btn btn-city" data-city="110108">
海淀区
</button>
<button class="btn btn-city" data-city="411200">
三门峡
</button>
</div>
</div>
</div>
</div>
<style>
    .back-button {
        position: fixed;
        top: 10px;
        left: 10px;
        padding: 10px 20px;
        background-color: white;
        color: black;
        border: 2px solid #bc5ffb; /* 紫色边框 */
        border-radius: 5px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1000; /* 确保按钮在最上层 */
        transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    .back-button:hover {
        background-color: #bc5ffb; /* 紫色背景 */
        color: white;
        border-color: #4b0082; /* 深紫色边框 */
    }

    #container {
        width: 90%;
        height: 500px;
        margin: 50px auto;
        border: 2px solid #bc5ffb;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
        background-color: #160016;
    }

    #startButton {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 0;
        height: 0;
        padding: 0;
        border-style: solid;
        border-width: 20px 0 20px 40px;  /* 创建三角形 */
        border-color: transparent transparent transparent #bc5ffb;  /* 只显示左边框形成三角形 */
        background-color: transparent;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 1000;
    }

    #startButton:hover {
        border-color: transparent transparent transparent white;  /* 悬停时改变颜色 */
        transform: translate(-50%, -50%) scale(1.2);  /* 悬停时放大效果 */
    }

    #renderCanvas {
        display: none;
    }
</style>
<script type="module">
    import * as THREE from "https://cdn.skypack.dev/three@0.136.0";
    import { OrbitControls } from "https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls";

    document.getElementById('startButton').addEventListener('click', initScene);

    function initScene() {
        document.getElementById('startButton').style.display = 'none';
        document.getElementById('renderCanvas').style.display = 'block';

        let scene = new THREE.Scene()
        scene.background = new THREE.Color(0x160016)

        const container = document.getElementById('renderCanvas');
        const width = container.clientWidth || 800;
        const height = container.clientHeight || 600;

        let camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000)
        camera.position.set(0, 4, 60)

        let renderer = new THREE.WebGLRenderer()
        renderer.setSize(width, height)
        document.getElementById('renderCanvas').appendChild(renderer.domElement)

        window.addEventListener("resize", event => {
            const width = container.clientWidth;
            const height = container.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        })


        let controls = new OrbitControls(camera, renderer.domElement)
        controls.enableDamping = true
        controls.enablePan
        let gu = {
            time: { value: 0 }
        }
        let sizes = []
        let shift = []

        let pushShift = () => {
            shift.push(
                Math.random() * Math.PI,
                Math.random() * Math.PI * 2,
                (Math.random() * 0.9 + 0.1) * Math.PI * 0.1,
                Math.random() * 0.9 + 0.1
            )
        }

        let pts = new Array(50000).fill().map(p => {
            sizes.push(Math.random() * 1.5 + 0.5)
            pushShift()
            return new THREE.Vector3().randomDirection().multiplyScalar(Math.random() * 0.5 + 9.5)
        })

        for (let i = 0; i < 100000; i++) {
            let r = 10, R = 40;
            let rand = Math.pow(Math.random(), 1.5);
            let radius = Math.sqrt(R * R * rand + (1 - rand) * r * r);
            pts.push(new THREE.Vector3().setFromCylindricalCoords(radius, Math.random() * 2 * Math.PI, (Math.random() - 0.5) * 2));
            sizes.push(Math.random() * 1.5 + 0.5);
            pushShift();
        }
        let g = new THREE.BufferGeometry().setFromPoints(pts)
        g.setAttribute("sizes", new THREE.Float32BufferAttribute(sizes, 1))
        g.setAttribute("shift", new THREE.Float32BufferAttribute(shift, 4))
        let m = new THREE.PointsMaterial({
            size: 0.125,
            transparent: true,
            depthTest: false,
            blending: THREE.AdditiveBlending,
            onBeforeCompile: shader => {
                shader.uniforms.time = gu.time
                shader.vertexShader = `
                uniform float time;
                attribute float sizes;
                attribute vec4 shift;
                varying vec3 vColor;
                ${shader.vertexShader}
                `
                    .replace(
                        `gl_PointSize = size;`,
                        `gl_PointSize = size * sizes;`
                    )
                    .replace(
                        `#include <color_vertex>`,
                        `#include <color_vertex>
                    float d = length(abs(position)/vec3(40.,10.,40));
                    d=clamp(d,0.,1.);
                    vColor = mix(vec3(227.,155.,0.),vec3(100.,50.,255.),d)/255.;`
                    )
                    .replace(
                        `#include <begin_vertex>`,
                        `#include <begin_vertex>
                            float t = time;
                            float moveT = mod(shift.x + shift.z * t,PI2);
                            float moveS = mod(shift.y + shift.z * t,PI2);
                            transformed += vec3(cos(moveS) * sin(moveT),cos(moveT),sin(moveS)*sin(moveT)) * shift.w;
                            `
                    )
                shader.fragmentShader = `
                    varying vec3 vColor;
                    ${shader.fragmentShader}
                `.replace(
                    `#include <clipping_planes_fragment>`,
                    `#include <clipping_planes_fragment>
                        float d = length(gl_PointCoord.xy - 0.5);
                    `
                ).replace(
                    `vec4 diffuseColor = vec4( diffuse, opacity );`,
                    `vec4 diffuseColor = vec4( vColor, smoothstep(0.5, 0.1, d)/* * 0.5+0.5*/);`
                );
            }

        })
        let p = new THREE.Points(g, m)
        p.rotation.order = "ZYX"
        p.rotation.z = 0.2
        p.position.y = 6
        scene.add(p)
        let clock = new THREE.Clock()
        renderer.setAnimationLoop(() => {
            controls.update()
            let t = clock.getElapsedTime() * 0.5
            gu.time.value = t * Math.PI
            p.rotation.y = t * 0.05
            renderer.render(scene, camera)
        })
    }
</script>
<style>
    .Confirm {
        display: flex;
        flex-direction: column;
        overflow: hidden;
        width: 80%;
        height: 600px;
        background-color: #ccc;
        border-radius: 1rem;
        box-shadow: 0px 10px 5px -3px rgba(0, 0, 0, 0.2);
        margin-left: auto;
        margin-right: auto;
    }

    .Confirm-Header {
        display: flex;
        align-items: center;
        position: relative;
        flex: 0 0 4rem;
        margin: 0 1rem;
        border-bottom: solid 1px rgba(0, 0, 0, 0.1);
        white-space: nowrap;
    }

    .Confirm-Header-Button {
        display: block;
        width: 1.6rem;
        height: 1.6rem;
        border-radius: 1rem;
        flex: 0 0 auto;
        transition: background-color 0.3s;
    }

    .Confirm-Header-Button:not(:last-of-type) {
        margin-right: 1rem;
    }

    .Confirm-Header-Button_Close {
        background-color: #a43;
    }

    .Confirm-Header-Button_Close:hover {
        background-color: #c85a48;
    }

    .Confirm-Header-Button_Maximize {
        background-color: #cb3;
    }

    .Confirm-Header-Button_Maximize:hover {
        background-color: #d6c95c;
    }

    .Confirm-Header-Button_Minimize {
        background-color: #6a4;
    }

    .Confirm-Header-Button_Minimize:hover {
        background-color: #81c061;
    }

    .Confirm-Header-Title {
        margin: 0;
        padding: 0;
        transform: translateX(50%);
        margin-right: 50%;
        margin-left: auto;
    }

    .Confirm-Body {
        flex: 1;
        display: flex;
        align-items: flex-end;
        justify-content: space-between;
        position: relative;
        margin: 2rem 4rem;
    }

    .Confirm-Body-Title {
        margin: 0;
        padding: 0;
        position: absolute;
        transform: translateY(-50%);
        top: 5%;
        text-align: center;
        width: 100%;
    }

    .Confirm-Body-Button,
    .Confirm-Body-Button:link,
    .Confirm-Body-Button:visited {
        color: #fff;
        border-radius: 1rem;
        text-decoration: none;
        padding: 1rem 2rem;
        margin-bottom: 1rem;
        min-width: 4rem;
        text-align: center;
        transition: background-color 0.3s;
    }

    .Confirm-Body-Button_Delete {
        background-color: #a43;
        margin-left: 10rem;
    }

    .Confirm-Body-Button_Delete:hover {
        background-color: #c85a48;
    }

    .Confirm-Body-Button_Cancel {
        background-color: #6a4;
        margin-right: 7rem;
    }

    .Confirm-Body-Button_Cancel:hover {
        background-color: #81c061;
    }

    .Boi {
        --happiness: 0.9;
        --derp: 1;
        --px: 0.5;
        --py: 0.5;
        width: 22rem;
        max-width: 100%;
        height: 22rem;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-image: radial-gradient(#f7e0b2, #eb5);
        border-radius: 100%;
        overflow: hidden;
        margin: 0;
        align-self: center;
        flex: 0 0 auto;
        border: solid 2px #ecb23e;
        box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
    }

    .Boi,
    .Boi * {
        position: absolute;
    }

    .Boi::before {
        content: '';
        display: block;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background-image: linear-gradient(to bottom, #5a8, rgba(85, 170, 136, 0));
        opacity: calc(1 - var(--happiness));
    }

    .Boi-Blush {
        width: 20%;
        height: 10%;
        background-color: rgba(255, 100, 100, 0.3);
        border: 3px solid rgba(255, 100, 100, 0.3);
        top: calc(45% + var(--py) * 10%);
        border-radius: 100%;
        opacity: calc(var(--happiness) * var(--happiness) * 0.9 + 0.1);
    }

    .Boi-Blush_L {
        left: calc(7% + var(--px) * 2%);
    }

    .Boi-Blush_R {
        right: calc(9% - var(--px) * 2%);
    }

    .Boi-Eye {
        width: calc(26% - var(--happiness) * 2%);
        height: calc(26% - var(--happiness) * 2%);
        background-color: #f6f6f6;
        border-radius: 100%;
        top: calc(25% + var(--py) * 10%);
        overflow: hidden;
    }

    .Boi-Eye_L {
        left: calc(18% + var(--px) * 4%);
    }

    .Boi-Eye_L::after {
        transform: translate(calc((var(--px) + var(--derp) * 0.5) * 100%), calc((var(--py) + var(--derp) * 0.5) * 100%));
    }

    .Boi-Eye_R {
        right: calc(22% - var(--px) * 4%);
    }

    .Boi-Eye_R::after {
        transform: translate(calc((var(--px) + var(--derp) * -0.3) * 100%), calc((var(--py) + var(--derp) * -0.3) * 100%));
    }

    .Boi-Eye::after {
        content: '';
        display: block;
        background-color: #421;
        width: calc(55% - var(--happiness) * 10%);
        height: calc(55% - var(--happiness) * 10%);
        border-radius: 100%;
    }

    .Boi-Mouth {
        width: calc(51% - var(--happiness) * 2%);
        height: calc(26% - var(--happiness) * 2%);
        background-color: #a33;
        border-radius: calc((1 - var(--happiness)) * 10em) calc((1 - var(--happiness)) * 10em) calc(var(--happiness) * 16em) calc(var(--happiness) * 16em);
        top: calc(57.5% + var(--py) * 5%);
        left: calc(47.5% + var(--px) * 5%);
        transform: translateX(-50%);
        overflow: hidden;
        border: 3px solid #962d2d;
        /* -webkit-mask-image: -webkit-radial-gradient(white, black); */
    }

    .Boi-Mouth::before {
        content: '';
        display: block;
        position: absolute;
        width: 20%;
        height: 20%;
        top: 0;
        left: 50%;
        background-color: white;
        border-radius: 0 0 0.5rem 0.5rem;
    }

    .Boi-Mouth::after {
        content: '';
        display: block;
        position: absolute;
        width: 60%;
        height: 50%;
        left: 10%;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 20rem 20rem 0 0;
    }
</style>
<script>
const confirm = document.querySelector('.Confirm');
const boi = document.querySelector('.Boi');
const btnDelete = document.querySelector('.Confirm-Body-Button_Delete');
const btnCancel = document.querySelector('.Confirm-Body-Button_Cancel');
const current = {
    happiness: 0.9,
    derp: 1,
    px: 0.5,
    py: 0.5
};
const target = { ...current };
confirm.addEventListener('mousemove', onMouseMove);
confirm.addEventListener('mouseleave', onMouseLeave);
function onMouseMove({ clientX: x, clientY: y }) {
    let dx1 = x - btnDelete.getBoundingClientRect().x - btnDelete.getBoundingClientRect().width * 0.5;
    let dy1 = y - btnDelete.getBoundingClientRect().y - btnDelete.getBoundingClientRect().height * 0.5;
    let dx2 = x - btnCancel.getBoundingClientRect().x - btnCancel.getBoundingClientRect().width * 0.5;
    let dy2 = y - btnCancel.getBoundingClientRect().y - btnCancel.getBoundingClientRect().height * 0.5;
    let px = (x - confirm.getBoundingClientRect().x) / confirm.getBoundingClientRect().width;
    let py = (y - confirm.getBoundingClientRect().y) / confirm.getBoundingClientRect().height;
    let distDelete = Math.sqrt(dx1 * dx1 + dy1 * dy1);
    let distCancel = Math.sqrt(dx2 * dx2 + dy2 * dy2);
    let happiness = Math.pow(distDelete / (distCancel + distDelete), 0.75);
    target.happiness = happiness;
    target.derp = 0;
    target.px = px;
    target.py = py;
}
function onMouseLeave() {
    target.happiness = 0.9;
    target.derp = 1;
    target.px = 0.5;
    target.py = 0.5;
}
function update() {
    for (let prop in target) {
        if (target[prop] === current[prop]) {
            continue;
        } else if (Math.abs(target[prop] - current[prop]) < 0.01) {
            current[prop] = target[prop];
        } else {
            current[prop] += (target[prop] - current[prop]) * 0.1;
        }
        boi.style.setProperty(`--${prop}`, current[prop]);
    }
    requestAnimationFrame(update);
}
update();
</script>
<style>
.main-container {
    position: relative;
    width: 70%;
    height: fit-content;
    margin: 50px auto;
    background: linear-gradient(to bottom, #5d8ef7, #a5c8ff);
    border-radius: 20px;
}

.weather-card {
    width: 300px;
    height: 525px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(10px);
    padding: 25px;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    z-index: 10;
}

/* 侧边栏样式 */
.side-controls {
    position: absolute;
    top: -20px;
    left: 150px;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
    padding: 20px 0;
    transform: translateX(calc(100% - 20px));
    z-index: 5;
}

.control-section {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 0 15px 15px 0;
    padding: 15px 15px 15px 25px;
    box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
    width: 160px;
}

.control-section:hover {
    transform: translateX(5px);
}

.control-label {
    margin-bottom: 12px;
    font-weight: bold;
    font-size: 0.9rem;
    opacity: 0.9;
    text-align: center;
    color: white;
}

/* 天气按钮组 */
.weather-buttons {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

/* 城市按钮组 */
.city-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
    top: 3px;
}

.btn {
    padding: 8px 12px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.3s ease;
    border: none;
    text-align: left;
    position: relative;
}

.btn-weather {
    background-color: rgba(255, 255, 255, 0.3);
    color: white;
    padding-left: 35px;
    margin-bottom: 8px;
    margin-left: 10px;
}

.btn-weather:hover {
    background-color: rgba(255, 255, 255, 0.5);
}

.btn-weather::before {
    content: "";
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    border-radius: 50%;
}

.btn-weather[data-weather="sunny"]::before {
    background: linear-gradient(to bottom right, #ff7e00, #ffb300);
}

.btn-weather[data-weather="cloudy"]::before {
    background: linear-gradient(to bottom right, #6a93cb, #a4b5c8);
}

.btn-weather[data-weather="rainy"]::before {
    background: linear-gradient(to bottom right, #515175, #8b8ba7);
}

.btn-weather[data-weather="snowy"]::before {
    background: linear-gradient(to bottom right, #7597de, #c9d6ff);
}

.btn-weather[data-weather="haze"]::before {
    background: linear-gradient(to bottom right, #94a187, #b2b8a9);
}

.btn-city {
    background-color: #2c3e50;
    color: white;
    padding-left: 15px;
    margin-bottom: 10px;
    margin-left: 12px;
}

.btn-city:hover {
    background-color: #34495e;
}

/* 天气背景 */
.sunny {
    background: linear-gradient(to bottom right, #ff7e00, #ffb300);
}

.cloudy {
    background: linear-gradient(to bottom right, #6a93cb, #a4b5c8);
}

.rainy {
    background: linear-gradient(to bottom right, #515175, #8b8ba7);
}

.snowy {
    background: linear-gradient(to bottom right, #7597de, #c9d6ff);
}

.haze {
    background: linear-gradient(to bottom right, #94a187, #b2b8a9);
}

.weather-icon {
    font-size: 6rem;
    margin: 10px 0;
}

.sunny .weather-icon {
    animation: rotateIcon 20s linear infinite;
}

@keyframes rotateIcon {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.temperature {
    font-size: 3rem;
    font-weight: bold;
    margin: 10px 0;
}

.details {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.4);
}

.detail-item {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* 动画元素 */
.weather-animation {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    overflow: hidden;
}

/* 改进的晴天动画 */
.sun-wrapper {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
}

.sun-body {
    position: absolute;
    width: 100%;
    height: 100%;
    background: #ffeb3b;
    border-radius: 50%;
    box-shadow: 0 0 20px 5px rgba(255, 235, 59, 0.7);
    animation: pulse 2s infinite alternate;
}

.sun-ray {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 2px;
    height: 30px;
    background: #ffeb3b;
    transform-origin: bottom center;
    box-shadow: 0 0 10px 1px rgba(255, 235, 59, 0.7);
    animation: rayGlow 2s infinite alternate;
}

/* 改进的多云动画 */
.cloud-container {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.cloud {
    position: absolute;
    background: white;
    opacity: 0.8;
}

.cloud-body {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50px;
}

.cloud-puff {
    position: absolute;
    background: white;
    border-radius: 50%;
}

/* 雨 */
.rain {
    position: absolute;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.1));
    width: 2px;
    height: 15px;
    border-radius: 10px;
    animation: rain 1s infinite linear;
}

/* 雪 */
.snow {
    position: absolute;
    background: white;
    border-radius: 50%;
    width: 8px;
    height: 8px;
    opacity: 0.8;
    animation: snow 5s infinite linear;
}

/* 雾霾 */
.haze-layer {
    position: absolute;
    width: 100%;
    height: 7px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    animation: hazeMove 3s infinite alternate;
}

.loading {
    font-size: 1.5rem;
}

.city-name {
    margin-top: 10px;
    font-size: 1.2rem;
}

.report-time {
    font-size: 0.8rem;
    margin-top: 15px;
    opacity: 0.8;
}

/* 动画关键帧 */
@keyframes pulse {
    0% {
        transform: scale(1);
    }

    100% {
        transform: scale(1.1);
    }
}

@keyframes rayGlow {
    0% {
        opacity: 0.3;
        height: 30px;
    }

    100% {
        opacity: 0.7;
        height: 35px;
    }
}

@keyframes cloudFloat {
    0% {
        transform: translateX(0) translateY(0);
    }

    50% {
        transform: translateX(-10px) translateY(5px);
    }

    100% {
        transform: translateX(0) translateY(0);
    }
}

@keyframes cloudMove {
    0% {
        transform: translateX(120%);
    }

    100% {
        transform: translateX(-120%);
    }
}

@keyframes rain {
    0% {
        transform: translateY(-50px) skewX(-15deg);
        opacity: 0;
    }

    5% {
        opacity: 0.5;
    }

    90% {
        opacity: 0.5;
    }

    100% {
        transform: translateY(250px) skewX(-15deg);
        opacity: 0;
    }
}

@keyframes snow {
    0% {
        transform: translateY(-50px) translateX(0) rotate(0deg);
        opacity: 0;
    }

    10% {
        opacity: 0.8;
    }

    90% {
        opacity: 0.8;
    }

    100% {
        transform: translateY(250px) translateX(20px) rotate(360deg);
        opacity: 0;
    }
}

@keyframes hazeMove {
    0% {
        opacity: 0.2;
        transform: translateX(-5px);
    }

    100% {
        opacity: 0.4;
        transform: translateX(5px);
    }
}

.error {
    color: #ff6b6b;
    font-weight: bold;
    padding: 20px;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .main-container {
        width: 300px;
    }

    .side-controls {
        position: static;
        flex-direction: row;
        transform: none;
        margin-top: 20px;
        padding: 0;
        justify-content: space-between;
    }

    .control-section {
        width: 48%;
        border-radius: 15px;
        padding: 15px;
    }

    .control-section:hover {
        transform: translateY(-5px);
    }
}
</style>
<script>
let currentWeatherData = null;
document.addEventListener('DOMContentLoaded', () => {
    // 替换为您的高德地图API密钥
    const apiKey = '2cd43bef70e749d430636855ce500a21';
    const cityCode = '110108'; // 默认北京东城区
    initWeatherCard();
    fetchWeather(apiKey, cityCode);
    document.querySelectorAll('.btn-weather').forEach(button => {
        button.addEventListener('click', () => {
            const weatherType = button.getAttribute('data-weather');
            manuallySetWeather(weatherType);
        });
    });
    document.querySelectorAll('.btn-city').forEach(button => {
        button.addEventListener('click', () => {
            const cityCode = button.getAttribute('data-city');
            fetchWeather(apiKey, cityCode);
        });
    });
});

function initWeatherCard() {
    const card = document.getElementById('weatherCard');
    if (!card) {
        console.error('Weather card not found!');
        return;
    }
    let animation = document.getElementById('weatherAnimation');
    if (!animation) {
        animation = document.createElement('div');
        animation.id = 'weatherAnimation';
        animation.className = 'weather-animation';
        card.appendChild(animation);
    }
    card.innerHTML = '<div id="weatherAnimation" class="weather-animation"></div><div class="loading">加载中...</div>';
}

async function fetchWeather(apiKey, cityCode) {
    const card = document.getElementById('weatherCard');
    if (!card) {
        console.error('Weather card not found!');
        return;
    }
    card.innerHTML = '<div id="weatherAnimation" class="weather-animation"></div><div class="loading">加载中...</div>';
    try {
        const response = await fetch(`https://qcy-test.deno.dev/weather?city=${cityCode}`);
        const data = await response.json();

        if (data.status === '1' && data.lives && data.lives.length > 0) {
            currentWeatherData = data.lives[0];
            renderWeatherCard(currentWeatherData);
        } else {
            showError('获取天气信息失败');
        }
    } catch (error) {
        console.error('Error fetching weather data:', error);
        showError('获取天气信息失败');
    }
}

function renderWeatherCard(weatherData) {
    const card = document.getElementById('weatherCard');
    if (!card) {
        console.error('Weather card not found!');
        return;
    }
    card.className = 'weather-card';
    card.innerHTML = '';
    const animation = document.createElement('div');
    animation.id = 'weatherAnimation';
    animation.className = 'weather-animation';
    card.appendChild(animation);
    const weatherType = getWeatherType(weatherData.weather);
    card.classList.add(weatherType);
    createWeatherAnimation(weatherType, animation);
    const infoContainer = document.createElement('div');
    infoContainer.className = 'weather-info';
    infoContainer.innerHTML = `
        <h2 class="city-name">${weatherData.province} ${weatherData.city}</h2>
        <div class="weather-icon">${getWeatherIcon(weatherType)}</div>
        <div class="weather-desc">${weatherData.weather}</div>
        <div class="temperature">${weatherData.temperature}°C</div>
        <div class="details">
            <div class="detail-item">
                <span>湿度</span>
                <strong>${weatherData.humidity}%</strong>
            </div>
            <div class="detail-item">
                <span>风向</span>
                <strong>${weatherData.winddirection}</strong>
            </div>
            <div class="detail-item">
                <span>风力</span>
                <strong>${weatherData.windpower}</strong>
            </div>
        </div>
        <div class="report-time">更新时间: ${weatherData.reporttime}</div>
    `;
    card.appendChild(infoContainer);
}

function getWeatherType(weather) {
    if (weather.includes('晴')) return 'sunny';
    if (weather.includes('多云') || weather.includes('阴')) return 'cloudy';
    if (weather.includes('雨')) return 'rainy';
    if (weather.includes('雪')) return 'snowy';
    if (weather.includes('雾') || weather.includes('霾') || weather.includes('沙尘')) return 'haze';
    return 'cloudy'; // 默认
}

function getWeatherIcon(type) {
    switch (type) {
        case 'sunny': return '☀️';
        case 'cloudy': return '☁️';
        case 'rainy': return '🌧️';
        case 'snowy': return '❄️';
        case 'haze': return '🌫️';
        default: return '🌤️';
    }
}

function createWeatherAnimation(type, container) {
    if (!container) {
        console.error('Animation container not found!');
        return;
    }
    container.innerHTML = '';
    switch (type) {
        case 'sunny':
            break;
        case 'cloudy':
            const cloudContainer = document.createElement('div');
            cloudContainer.className = 'cloud-container';
            for (let i = 0; i < 1; i++) {
                const cloudGroup = document.createElement('div');
                cloudGroup.className = 'cloud-group';
                cloudGroup.style.position = 'absolute';
                cloudGroup.style.width = i === 0 ? '120px' : '80px';
                cloudGroup.style.height = i === 0 ? '50px' : '35px';
                cloudGroup.style.top = i === 0 ? '50px' : '100px';
                cloudGroup.style.animation = `cloudMove ${i === 0 ? 30 : 20}s infinite linear`;
                cloudGroup.style.animationDelay = `${i * 5}s`;
                const cloudBody = document.createElement('div');
                cloudBody.className = 'cloud-body';
                cloudBody.style.background = 'white';
                cloudBody.style.borderRadius = '25px';
                cloudBody.style.width = '100%';
                cloudBody.style.height = '100%';
                cloudBody.style.opacity = '0.85';
                cloudBody.style.animation = `cloudFloat ${3 + i}s infinite ease-in-out`;
                cloudGroup.appendChild(cloudBody);
                const puffCount = i === 0 ? 5 : 3;
                const puffPositions = [
                    { top: '-50%', left: '10%', size: '60%' },
                    { top: '-60%', left: '30%', size: '70%' },
                    { top: '-55%', left: '50%', size: '65%' },
                    { top: '-45%', left: '70%', size: '55%' },
                    { top: '-40%', left: '85%', size: '50%' }
                ];
                for (let j = 0; j < puffCount; j++) {
                    const puff = document.createElement('div');
                    puff.className = 'cloud-puff';
                    puff.style.top = puffPositions[j].top;
                    puff.style.left = puffPositions[j].left;
                    puff.style.width = puffPositions[j].size;
                    puff.style.height = puffPositions[j].size;
                    puff.style.background = 'white';
                    puff.style.opacity = '0.9';
                    cloudGroup.appendChild(puff);
                }
                cloudContainer.appendChild(cloudGroup);
            }
            container.appendChild(cloudContainer);
            break;
        case 'rainy':
            for (let i = 0; i < 25; i++) {
                const drop = document.createElement('div');
                drop.className = 'rain';
                drop.style.left = `${Math.random() * 100}%`;
                drop.style.top = `${Math.random() * 50}%`;
                drop.style.animationDelay = `${Math.random() * 2}s`;
                drop.style.animationDuration = `${0.8 + Math.random() * 0.6}s`;
                drop.style.height = `${10 + Math.random() * 10}px`;
                drop.style.opacity = `${0.3 + Math.random() * 0.5}`;
                container.appendChild(drop);
            }
            break;
        case 'snowy':
            for (let i = 0; i < 30; i++) {
                const flake = document.createElement('div');
                flake.className = 'snow';
                flake.style.left = `${Math.random() * 100}%`;
                flake.style.top = `${Math.random() * 50}%`;
                flake.style.animationDelay = `${Math.random() * 5}s`;
                flake.style.animationDuration = `${3 + Math.random() * 7}s`;
                flake.style.width = `${3 + Math.random() * 7}px`;
                flake.style.height = flake.style.width;
                flake.style.opacity = `${0.6 + Math.random() * 0.4}`;
                container.appendChild(flake);
            }
            break;
        case 'haze':
            for (let i = 0; i < 10; i++) {
                const layer = document.createElement('div');
                layer.className = 'haze-layer';
                layer.style.top = `${20 + i * 15}px`;
                layer.style.animationDelay = `${i * 0.3}s`;
                layer.style.opacity = `${0.1 + Math.random() * 0.2}`;
                layer.style.width = `${60 + Math.random() * 40}%`;
                layer.style.left = `${Math.random() * 20}%`;
                container.appendChild(layer);
            }
            break;
    }
}

function manuallySetWeather(weatherType) {
    if (!currentWeatherData) return;
    const weatherDescriptions = {
        'sunny': '晴',
        'cloudy': '多云',
        'rainy': '小雨',
        'snowy': '小雪',
        'haze': '雾霾'
    };
    currentWeatherData.weather = weatherDescriptions[weatherType];
    renderWeatherCard(currentWeatherData);
}

function showError(message) {
    const card = document.getElementById('weatherCard');
    if (!card) return;
    card.innerHTML = `<div class="error">${message}</div>`;
}
</script>

      </div>
      
      
      
    </div>

    
    


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-thumbs-up"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">QCY</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>Word count total: </span>
    <span title="Word count total">337k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>Reading time total &asymp;</span>
    <span title="Reading time total">5:06</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.min.js","integrity":"sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  <script src="/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: '32px',
  left: 'unset',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

</body>
</html>
